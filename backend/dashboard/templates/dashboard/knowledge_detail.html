{% extends 'dashboard/dashboard_base.html' %}
{% block title %}{{ article.title }}{% endblock %}

{% block content %}
<h2>{{ article.title }}</h2>
<p class="text-muted">{{ article.read_time_minutes }} min read</p>

<div class="p-4 bg-white rounded shadow-sm">
  <!-- Feature image -->
  {% if article.feature_image %}
    <img src="{{ article.feature_image.url }}" alt="{{ article.title }}" class="img-fluid rounded mb-3">
  {% endif %}

  <!-- Summary -->
  {% if article.summary %}
    <p class="lead">{{ article.summary }}</p>
  {% endif %}

  <!-- Full content -->
  <div class="mt-3">
    {{ article.content|linebreaks }}
  </div>

  <!-- Video embed (YouTube/Vimeo) -->
  {% if article.video_url %}
  <div class="media-frame mt-4">
    <iframe
      src="{{ article.video_embed_url }}"
      title="Video"
      class="embed-responsive-item"
      allow="accelerometer; autoplay; clipboard-write; encrypted-media; gyroscope; picture-in-picture; web-share"
      referrerpolicy="strict-origin-when-cross-origin"
      allowfullscreen>
    </iframe>
  </div>
{% endif %}


  <!-- Uploaded video file -->
  {% if article.video_file %}
    <div class="media-frame mt-4">
      <video controls>
        <source src="{{ article.video_file.url }}" type="video/mp4">
        Your browser does not support the video tag.
      </video>
    </div>
  {% endif %}

  <!-- Attachments -->
  {% if attachments %}
    <h5 class="mt-4">Attachments</h5>
    <ul class="list-unstyled">
      {% for attachment in attachments %}
        <li>
          <a href="{{ attachment.file.url }}" class="btn btn-outline-primary btn-sm" download>
            ðŸ“Ž {{ attachment.name }}
          </a>
        </li>
      {% endfor %}
    </ul>
  {% endif %}

  <!-- Back link -->
  <a href="{% url 'dashboard_knowledge' %}" class="btn btn-outline-secondary btn-sm mt-4">
    â¬… Back to Knowledge Centre
  </a>
</div>
{% endblock %}
